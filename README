
bcast v 0.8, beta release  
--------------------------

H. Motteler, 30 July 2013

Overview
---------

This is a "beta" release.  The key procedures rdr2mat, geo_daily,
and rdr2sdr, which together take HDF RDR to Matlab SDR data, have
been tested extensively, but the wrappers and user environment are
still evolving.  

The to-do list includes documentation for the mat file SDR fields,
a high res version of the LW NLC correction, file-spanning moving
averages, and regularization of the output format.  A lot of this
could be fixed with an RDR reader that is better integrated with the
validation code in checkRDRf.  There could be better documentation.
There is this README and detailed comments in many of the individual
procedures but not much else.  Some notes on getting started would
be helpful.

There are some high-level design issues that could be addressed,
like what RDR reader to use, low-level data flow, output formats,
and so on, but these are probably not urgent.  The current output
is SDR mat files, which we translate to RTP or work with directly.
I'd originally intended this purely as an intermediate format but
they are compact and convenient for many applications.

Top level directories
----------------------

  docs      - documentation
  source    - main source directory
  motmsc    - my development and utils
  hires     - high res code and params
  davet     - Dave's code
  strow     - Larrabee's code
  readers   - MIT readers with local mods
  inst_data - instrument data:  nonlinearity, emissivity, etc.
  demo      - end-to-end demo with a small dataset

Matlab and data paths 
----------------------

I'd like to allow for a limited set of different versions of some
procedures by careful management of the matlab path.  This lets us
have things like a highres/inst_params.m and a source/inst_params.m,
or a source/calmain.m and a davet/calmain.m.  Mostly this just means
if you're working in your own directory you can, as an option, run
your own version of some of the code.

The search order for matlab procedures is the current directory and
then the reverse order they are set with addpath.  So for example if
you do

     addpath ../davet
     addpath ../source

and then run in motmsc, files there will take precence, then files
from source, and finally files from davet.

matlab paths here are relative, they assume you are running one
level below the bcast installation home.  Paths to data are set up
as ../yyyy/doy/ but that's just a convention, doy can be any subset
of the day's data.  The only restriction is that the current setup
uses doy to match the geo daily summary, so doy can't be a subset
that spans days.

Main processing steps
----------------------

  rdr2mat    - wrapper and some QC for the MIT reader
  geo_daily  - save a day of GCRSO data in a mat file
  sci_daily  - science and engineering packet summary
  avg_daily  - optional moving average preprocessing
  rdr2sdr    - main function for RDR to SDR processing

rdr2mat, sci_daily, and geo_daily are called by a wrapper script
motmsc/do_rdr2mat.m, that loops over days.  sci_daily is not needed
for bcast processing but is useful for monitoring various instrument
parameters, see motmsc/plot_allsci.m for some examples.  bcast_main
is a wrapper for rdr2sd4 that sets paths, files, and options.

The use of the geo summary file may be temporary, the geo_match
procedure could be modified to read the GCRSO files directly.  But
it only takes a couple of minutes to build the summary file for a
day's worth of data.

The moving average preprocessing, to allow moving averages to span
the 60-scan RDR files, has been tested with earlier versions of the
code but is not yet integrated with the current release.  This may
wait on a more general rewrite of the lower layers of the code.

