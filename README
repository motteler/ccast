
ccast v 0.95, beta release  
----------------------------

H. Motteler, 1 Apr 2014

Overview
---------

ccast is software to take telemetery data for the Cross-track
Infrared Sounder (CrIS), a Fourier transform spectrometer for the
Suomi NPP and JPSS weather satellites, and produce high-quality
calibrated radiances.  Input is a CCSDS packet stream, typically
with an HDF wrapper, and the output is HDF5.  matlab_sdr.txt has
more info on the output format.

This is a "beta" release.  The key procedures rdr2mat, geo_daily,
and rdr2sdr, which together take HDF RDR to Matlab SDR data, have
been tested extensively, but the wrappers and user environment are
still evolving.  

The to-do list includes better documentation, regularized output,
probably new output formats, a more closely integrated RDR reader,
file-spanning moving averages, retaining the complex component for
the matlab SDR output, possibly changing SDR variable names to match
the IDPS and ADL conventions, and an option for locally calculated
geolocation.

Documentation is sparse.  There are detailed comments at the start
of most major procedures, doc/matlab_sdr.txt gives the ccast matlab
SDR format, and motmsc/README a summary of the test and development
scripts there.  We need an ATBD, at least an overview, and a user's
guide.

Design choices for output format and features such as file-spanning
moving averages depend on the RDR reader and its integration with the
validation code in checkRDRf.  It was convenient for development but
we should probably move away from a one-to-one correspondence between
RDR and SDR files, and present the SDR data in a more regularized way.
The current geo preprocessing step is needed mainly because the GCRSO
geo and RDR files don't match up.

Despite these problems the calibration code--both the UMBC and davet
branches--works well and for the most part is in close agreement with
the IDPS and ADL codes.  Differences that remain are more likely due
to different physical assumptions and modeling than any problems that
are purely with the code.

Top level directories
----------------------

  docs      - documentation
  source    - main source directory
  motmsc    - my development and utils
  hires     - high res code and params
  davet     - Dave's code
  strow     - Larrabee's code
  readers   - MIT readers with local mods
  inst_data - instrument data:  nonlinearity, emissivity, etc.
  demo      - end-to-end demo with a small dataset

Matlab and data paths 
----------------------

I'd like to allow for a limited set of different versions of some
procedures by careful management of the matlab path.  This lets us
have things like a highres/inst_params.m and a source/inst_params.m,
or a source/calmain.m and a davet/calmain.m.  Mostly this just means
if you're working in your own directory you can, as an option, run
your own version of some of the code.

The search order for matlab procedures is the current directory and
then the reverse order they are set with addpath.  So for example if
you do

     addpath ../davet
     addpath ../source

and then run in motmsc, files there will take precence, then files
from source, and finally files from davet.

matlab paths here are relative, they assume you are running one
level below the bcast installation home.  Paths to data are set up
as ../yyyy/doy/ but that's just a convention, doy can be any subset
of the day's data.  The only restriction is that the current setup
uses doy to match the geo daily summary, so doy can't be a subset
that spans days.

Main processing steps
----------------------

  rdr2mat    - wrapper and some QC for the MIT reader
  geo_daily  - save a day of GCRSO data in a mat file
  sci_daily  - science and engineering packet summary
  avg_daily  - optional moving average preprocessing
  rdr2sdr    - main function for RDR to SDR processing

rdr2mat, sci_daily, and geo_daily are called by a wrapper script
motmsc/do_rdr2mat.m, that loops over days.  sci_daily is not needed
for bcast processing but is useful for monitoring various instrument
parameters, see motmsc/plot_allsci.m for some examples.  bcast_main
is a wrapper for rdr2sd4 that sets paths, files, and options.

The use of the geo summary file may be temporary, the geo_match
procedure could be modified to read the GCRSO files directly.  But
it only takes a couple of minutes to build the summary file for a
day's worth of data.

The moving average preprocessing, to allow moving averages to span
the 60-scan RDR files, has been tested with earlier versions of the
code but is not yet integrated with the current release.  This may
wait on a more general rewrite of the lower layers of the code.

